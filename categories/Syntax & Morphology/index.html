<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Syntax & Morphology</title>

  <link rel="icon" href="../../favicon.ico" />
  <link rel="stylesheet" href="../../style.css" />
  <script src="../../lib/marked.min.js"></script>
</head>
<body>
  <header>
    <h1>Syntax &amp; Morphology</h1>
    <nav><ul><li><a href="../../">Home</a></li></ul></nav>
  </header>

  <main id="article-list"><p>Loading articles…</p></main>
  <footer><p>&copy; 2025 My Linguistics Blog</p></footer>

  <script>
    const articles = ["Introduction to Polish Clauses"];
    const container = document.getElementById("article-list");

    async function loadArticles () {
      container.innerHTML = "";

      for (const folder of articles) {
        const encFld = encodeURIComponent(folder);

        const mdURL  = `./${encFld}/article.md`;
        const pageURL = `./${encFld}/`;

        try {
          const mdText  = await (await fetch(mdURL)).text();

          const title = (mdText.match(/^#+\s*(.*)$/m) || [,""])[1] || folder;

          const tmp = document.createElement("div");
          tmp.innerHTML = marked.parse(mdText);       // md → html
          const plain = tmp.textContent || tmp.innerText;
          const preview = plain.split(/\s+/).slice(0, 40).join(" ") + "…";

          const sec = document.createElement("section");
          sec.innerHTML =
            `<h2><a href="${pageURL}">${title}</a></h2><p>${preview}</p>`;
          container.appendChild(sec);
        } catch (err) {
          console.error("Failed to load", folder, err);
        }
      }
    }

    loadArticles();
  </script>
</body>
</html>
